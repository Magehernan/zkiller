@page "/"
@implements IDisposable;
@using Nethereum.UI;
@using Nethereum.Metamask;
@inject IJSRuntime jsRuntime;
@inject SelectedEthereumHostProviderService selectedHostProviderService
@inject NavigationManager _navigationManager
@using Nethereum.Web3;
@using Nethereum.Hex.HexTypes;
@using Nethereum.Siwe.Core
@using Nethereum.Util
@using Microsoft.AspNetCore.Components.Authorization
@using System.Security.Claims


<AuthorizeView Roles="EthereumConnected">
	<Authorized>
		<div class="card m-1">
			<div class="card-body">
				<div class="row">
					<label class="col-sm-3 col-form-label-lg">Selected Account:</label>
					<div class="col-sm-6">
						@SelectedAccount
						<small id="selectedAccountHelp" class="form-text text-muted">The selected account is bound to the host (ie Metamask) on change</small>
					</div>
				</div>

				<div class="row">
					<label class="col-sm-3 col-form-label-lg">Selected Account from Claims Principal</label>
					<div class="col-sm-6">
						@context?.User?.FindFirst(c => c.Type.Contains(ClaimTypes.NameIdentifier))?.Value
						<small id="selectedAccountHelp" class="form-text text-muted">The selected account is bound to the claims principal</small>
					</div>
				</div>
			</div>
			<div class="card-body">
				<div class="row">
					<label class="col-sm-3 col-form-label-lg">Selected Network ChainId:</label>
					<div class="col-sm-6">
						@SelectedChainId
						<small id="selectedAccountHelp" class="form-text text-muted">The selected chain Id</small>
					</div>
				</div>
			</div>

			<button @onclick="NewGameAsync">Create</button>
		</div>

	</Authorized>
	<NotAuthorized>

		<div>
			Please connect to Ethereum !
		</div>

	</NotAuthorized>
</AuthorizeView>




